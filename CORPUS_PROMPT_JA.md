# コーパス生成用プロンプト（高品質・再現性強化版）

以下を、そのまま各LLMに渡して使ってください。  
`{{...}}` の部分だけ置き換えます。

````text
あなたは「日本語音声収録コーパス設計者」です。
以下の仕様を厳守し、カテゴリ {{CATEGORY_CODE}}（{{CATEGORY_LABEL}}） の収録用文章を作成してください。

## 目的
- 日本語の音声収録・音声合成・感情表現学習に使える高品質コーパスを作る。
- 1文1発話で、読み上げやすく、カテゴリの感情・話法の差が明確な文を作る。

## 収録前提（設計基準）
- 想定話者: 日本語話者（成人）1名、1文を自然速度で1回読み。
- 1文は単発で完結し、単独で意味が通ること（文脈依存禁止）。
- 息継ぎしやすい長さ・語順を優先し、言いにくい連続音は避ける。

## 出力対象
- 文章ファイル: {{FILE_NO}}_{{CATEGORY_CODE}}.txt
- IDファイル: {{FILE_NO}}_{{CATEGORY_CODE}}_IDs.txt
- 監査メタデータ: {{FILE_NO}}_{{CATEGORY_CODE}}_AUDIT.csv

## 行フォーマット
- 文章ファイル: `{{CATEGORY_CODE}}_001 文章` の形式で200行
- IDファイル: `{{CATEGORY_CODE}}_001` の形式で200行
- IDは `001` から `200` までの連番（欠番・重複禁止）
- 文章ファイルの行は正規表現 `^{{CATEGORY_CODE}}_[0-9]{3}\s.+$` を満たすこと

## 必須制約（重要）
1. 文章数はちょうど200。
2. 全文ユニーク（同一文、語尾だけ違う実質同文、極端なテンプレ反復を禁止）。
3. 各文は単独で意味が完結すること（前後文参照を禁止）。
4. 文字数は 8〜55 文字、主レンジは 24〜48 文字。
5. 文長バランス（許容レンジ）:
   - 短文（8〜17字）: 20〜30文
   - 中文（18〜35字）: 70〜90文
   - 長文（36〜55字）: 80〜100文
6. 記号バランス（文末記号の件数）:
   - `。`: 120〜170文
   - `！`: 10〜45文
   - `？`: 8〜35文
   - `…`: 6〜24文
   - 同一記号3連続（例: `！！！`）は禁止
7. 読みの安定性:
   - 難読語・当て字・固有名詞・商品名・実在人物名を避ける
   - 口語として自然で、発声しやすいテンポにする
8. 安全性:
   - 差別表現、過度な暴力・性的表現、誹謗中傷、違法行為の誘発を禁止
9. キャラクター分散仕様:
   - 200文全体にキャラクター文体を自然に散らして入れる
   - 8〜14種類のキャラクター文体を混在させる（例: 少年風、少女風、剣士風、執事風、メイド風、魔術師風、騎士風、冒険者風、商人風、職人風、先輩風、先生風、友人風、クール系）
   - 特定のキャラクター文体を必須固定しない（例示はあくまで候補）
   - 文体カテゴリ（年齢・性格系 / 職業系 / 学園・日常系 / ファンタジー系）から各1種類以上を含める
   - ファンタジー系文体（例: 剣士風、魔術師風、騎士風、冒険者風）は20〜60文を目安に含める
   - 全200文のうち、キャラクター文体は90〜150文
   - 各50文ブロック内で、任意の単一文体が22文を超えない
   - 同一キャラクターが5文以上連続しない
   - ただしカテゴリ感情（{{CATEGORY_LABEL}}）は維持する
10. バリエーション設計:
   - 全200文の中に「意味が近いが文体・語尾・温度感が異なる」ペアを12〜28組含める
   - ただしコピーレベルの類似は禁止し、語彙・構文を十分に変える
11. 音声学習向けカバレッジ（目標レンジ）:
   - 拗音を含む文を20〜45文
   - 促音（っ）を含む文を15〜35文
   - 撥音（ん）を含む文を60〜120文
   - 長音感のある文（長母音・語尾の伸びを含む）を25〜60文
   - 濁音を含む文を50〜110文、半濁音（ぱ/ぴ/ぷ/ぺ/ぽ）を含む文を10文以上
   - 外来音（ファ/フィ/フェ/フォ/ティ/ディ等）を含む文を4〜16文
12. 類似文検出（自動チェック）:
   - 2文間の 2-gram 重複率が 0.72 を超える文ペアを検出し再生成
   - 語尾差し替えのみの文（語幹ほぼ同一）は再生成
   - 類似検出で引っかかった文は、語彙・構文・語順の2要素以上を変えて再作成
13. 読み揺れ管理:
   - 数字は算用数字で統一する（例: 3、12）
   - 日付は `3月14日` 形式、時刻は `7時30分` 形式に統一する。カッコとカタカナでわかりやすくルビを振る
   - 数量表現は `3個` `20メートル` のように単位付きで明示する
   - 同一概念で表記を混在させない（例: `ひとつ` と `1つ` を同一ファイル内で併用しない）
14. 表現強度の分散:
   - 各カテゴリ内で弱/中/強を混在させる
   - 分布は 弱 54〜66 / 中 74〜86 / 強 54〜66（合計200）
   - 強度が変わってもカテゴリ感情（{{CATEGORY_LABEL}}）は崩さない
15. 発話容易性（スコア管理）:
   - 早口化しやすい音の連続、過度な同音反復、息継ぎ困難な文を避ける
   - 録音時に噛みやすい語順は言い換えて自然さを優先する
   - 各文に内部的な「発話容易性スコア（1〜5）」を付与し、2以下は必ず再生成する
16. 監査メタデータ出力:
   - 全200文について監査CSVを同時に出力する
   - CSV列は `id,character_style,intensity,length_chars,punctuation,phoneme_tags,near_pair_group,reading_ease_score` とする
17. 再現性:
   - `{{RUN_SEED}}` を固定し、同一入力条件では文体配分と並び規則を再現可能にする
   - 乱択が必要な箇所（候補選抜・並び替え）は `{{RUN_SEED}}` にのみ依存する

## 監査CSVの値定義
- `character_style`: `none` または文体名（例: `boy`, `girl`, `swordsman`, `butler`, `maid`, `mage`, `knight`, `adventurer`, `merchant`, `artisan`, `senpai`, `teacher`, `friend`, `cool`）
- `intensity`: `weak` / `mid` / `strong`
- `length_chars`: 文字数（半角英数・記号を1文字換算）
- `punctuation`: 文末記号1つ（`。` `！` `？` `…`）
- `phoneme_tags`: `YOUON;SOKUON;HATSUON;CHOON;DAKUON;HANDAKUON;GAIRAION` から該当タグを `;` 区切り
- `near_pair_group`: 近接ペア所属なら `P01`〜`P28`、非所属は空欄
- `reading_ease_score`: `3` `4` `5` のみ許可（1,2は再生成対象）

## キャラクター想定文の注意
- キャラクター名ラベル（例: 「[執事]」）は本文に出力しない
- 文体・語尾・言い回しでキャラクター差を表現する
- 収録用途を優先し、過度な設定語りや固有名詞は入れない
- 出現位置は散らし、文体の塊を作りすぎない
- ファンタジー系の口調は許可するが、世界固有名詞・作品連想の強い語は避ける
- 文体を増やしても朗読の自然さを損なわない（過度な古語・難語を避ける）
- 特定の数種類だけを繰り返さず、カテゴリ全体で口調のバリエーションを広く確保する

## 音韻・表記ルール補足
- 漢字偏重を避け、ひらがな・カタカナの自然な混在を保つ
- 読みが複数想定される語（例: 生、今日、一日）は文脈で読みが一意になる形を優先する
- 記号の多用で読みに迷う文は避ける

## カテゴリ定義（文体の芯）
- JOY: 明るく高揚、前向き、幸福感
- ANGRY: いら立ち、怒り、不満
- SAD: 落胆、寂しさ、喪失感
- FUN: 軽快、遊び心、面白さ
- SURPRISE: 驚き、発見、意外性
- CONTEMPT: 冷笑、見下し、軽蔑
- FEAR: 不安、緊張、恐れ
- CONFUSE: 困惑、迷い、理解不能感
- NORMAL: 中立で日常的、感情の偏りが弱い
- EXPLAIN: 説明口調、順序立てた案内
- ANNOUNCE: 駅・店内・施設アナウンス調、丁寧で明瞭
- WHISPER: 小声で親密、静かな語り
- LAZY: 気だるさ、低エネルギー

## 実行手順（出力には書かない）
1. 候補文を260文生成する。
2. 文体タグ・強度タグ・音韻タグ・発話容易性を内部付与する。
3. 近接ペアを12〜28組作り、類似過多を抑えて差分を確保する。
4. 監査チェックを実施し、FAIL行のみ再生成する（最大3ラウンド）。
5. 200文へ絞り込み、`{{RUN_SEED}}` で並びを確定させる。
6. ID付与後に本文・IDs・CSVの整合確認を行う。

## 機械監査PASS条件（出力には書かない）
- PASS条件:
  - 本文200行、IDs200行、CSVヘッダ+200行
  - ID欠番なし、重複なし、3ファイルでID完全一致
  - 文字数・文長バランス・記号バランス・音韻カバレッジが全て範囲内
  - 類似文禁止条件に抵触しない
  - `reading_ease_score` が全行 `3` 以上
- FAIL時:
  - 条件未達の行のみ再生成し、再監査する

## 出力ルール
- 最終出力は以下の3つのコードブロックのみ。
- 解説・注釈・チェック結果・前置きは一切出力しない。

```txt
{{CATEGORY_CODE}}_001 ...
{{CATEGORY_CODE}}_002 ...
...
{{CATEGORY_CODE}}_200 ...
```

```txt
{{CATEGORY_CODE}}_001
{{CATEGORY_CODE}}_002
...
{{CATEGORY_CODE}}_200
```

```csv
id,character_style,intensity,length_chars,punctuation,phoneme_tags,near_pair_group,reading_ease_score
{{CATEGORY_CODE}}_001,...
{{CATEGORY_CODE}}_002,...
...
{{CATEGORY_CODE}}_200,...
```
````

## 置換例
- `{{FILE_NO}}`: `01`
- `{{CATEGORY_CODE}}`: `JOY`
- `{{CATEGORY_LABEL}}`: `喜び`
- `{{RUN_SEED}}`: `20260217`

## 実行時の推奨
- 13カテゴリを一括生成せず、1カテゴリずつ実行する。
- 生成パラメータは固定（例: temperature 0.7 / top_p 0.95）にして再現性を保つ。
- 保存文字コードは運用環境に合わせる（既存資産互換が必要なら `CP932` 推奨）。
